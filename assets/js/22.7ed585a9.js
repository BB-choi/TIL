(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{286:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_22-07-17"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_22-07-17"}},[t._v("#")]),t._v(" 22-07-17")]),t._v(" "),s("p",[t._v("많은 웹사이트가 페이지 형식이 아닌, 무한 스크롤 형식으로 다음 데이터들을 화면에 보여주고 있다. 특히 모바일로 접속하는 사용자가 많아지면서, 이러한 경향이 뚜렷해 지고 있다.")]),t._v(" "),s("h2",{attrs:{id:"무한스크롤-구현"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#무한스크롤-구현"}},[t._v("#")]),t._v(" 무한스크롤 구현")]),t._v(" "),s("h3",{attrs:{id:"scroll-이벤트로-구현해보기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scroll-이벤트로-구현해보기"}},[t._v("#")]),t._v(" scroll 이벤트로 구현해보기")]),t._v(" "),s("p",[s("code",[t._v("scroll")]),t._v("이벤트를 이용하여 구현해 보자!🖱️")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/78826879/179498193-0f92e0bd-c517-4cba-98f6-da50566a5277.png",alt:"geometry property"}})]),t._v(" "),s("p",[t._v("👉 "),s("code",[t._v("이미지 출처")]),t._v(": "),s("a",{attrs:{href:"https://ko.javascript.info/size-and-scroll",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript.info - 요소 사이즈와 스크롤"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("스크롤바가 현재 페이지 하단까지 내려왔다는 사실을 어떻게 알 수 있을까?")]),t._v(" "),s("ol",[s("li",[t._v("현재 "),s("code",[t._v("페이지의 총 높이")]),t._v("를 알고")]),t._v(" "),s("li",[s("code",[t._v("이미 스크롤 된 영역")]),t._v("의 높이 + "),s("code",[t._v("현재 보여지는 영역")]),t._v("의 높이를 안다면")])]),t._v(" "),s("p",[t._v("두 높이를 비교하여 알 수 있을 것이다.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("scrollTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" clientHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" scrollHeight\n")])])]),s("p",[t._v("즉, 페이지의 총 높이("),s("code",[t._v("scrollHeight")]),t._v(")와 이미 스크롤 되어 보이지 않는 영역의 높이("),s("code",[t._v("scrollTop")]),t._v(") + 현재 보여지는 영역의 높이("),s("code",[t._v("clientHeight")]),t._v(")를 비교하는 방법으로 알아낼 수 있었다.")]),t._v(" "),s("p",[t._v("하지만 "),s("code",[t._v("scroll")]),t._v("이벤트는 사용자는 '한 번' 스크롤 했다고 여겨지는 때에도 매우 자주 호출되게 된다. 최적화가 필요한 시점이다.")]),t._v(" "),s("h3",{attrs:{id:"throttle-로-최적화-하기"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#throttle-로-최적화-하기"}},[t._v("#")]),t._v(" throttle 로 최적화 하기")]),t._v(" "),s("p",[s("code",[t._v("TypeScript")]),t._v("로 throttle 구현")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" throttle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  delay"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ReturnType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" setTimeout"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      timer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        timer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" delay"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("사용 예")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" throttle적용된함수 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("throttle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("함수"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELAY_MS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"react에서-scroll-이벤트-적용"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react에서-scroll-이벤트-적용"}},[t._v("#")]),t._v(" React에서 scroll 이벤트 적용")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scroll"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleScroll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scroll"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleScroll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("handleScroll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("컴포넌트가 마운트 될 때 scroll 이벤트를 등록하고, 언마운트 될 때 해제한다.")]),t._v(" "),s("hr"),t._v(" "),s("ul",[s("li",[t._v("무한스크롤을 구현하는 방식은 이 외에도 "),s("code",[t._v("IntersectionObserver")]),t._v(" 등을 사용하는 방법, 최적화 방법도 "),s("code",[t._v("requestAnimationFrame")]),t._v("을 사용하는 방법 등이 있다고 한다. 하나씩 구현해보면서 공부해보자✍✍")]),t._v(" "),s("li",[t._v("이번에는 "),s("code",[t._v("throttle")]),t._v("로 최적화했지만, 다음 페이지를 참고해서 다른 방법으로 최적화 해보자!😯\n"),s("ul",[s("li",[s("a",{attrs:{href:"https://jbee.io/web/optimize-scroll-event/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://jbee.io/web/optimize-scroll-event/"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("throttle은 "),s("code",[t._v("setTimeout")]),t._v("기반이므로 의도대로 동작하지 않을 수 있다."),s("a",{attrs:{href:"https://ko.javascript.info/settimeout-setinterval",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("참고")]),s("OutboundLink")],1)])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);