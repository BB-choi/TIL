<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>22-07-06 | TIL</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/TIL/images/logo-144.png">
    <meta name="description" content="Today I Learned">
    <meta name="og:title" content="2022년 7월 6일 TIL">
    <meta name="og:description" content="2022년 7월 6일 TIL - vanilla JavaScript로 Drag &amp; Drop 구현하기 - 1">
    <meta name="created-at" content="22-07-06">
    
    <link rel="preload" href="/TIL/assets/css/0.styles.50758481.css" as="style"><link rel="preload" href="/TIL/assets/js/app.d24ce332.js" as="script"><link rel="preload" href="/TIL/assets/js/2.2defd20b.js" as="script"><link rel="preload" href="/TIL/assets/js/18.562a103f.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.ea4055dc.js"><link rel="prefetch" href="/TIL/assets/js/11.56b3a606.js"><link rel="prefetch" href="/TIL/assets/js/12.5f345c8d.js"><link rel="prefetch" href="/TIL/assets/js/13.9769e1fe.js"><link rel="prefetch" href="/TIL/assets/js/14.87c069ff.js"><link rel="prefetch" href="/TIL/assets/js/15.786e414e.js"><link rel="prefetch" href="/TIL/assets/js/16.d89a635a.js"><link rel="prefetch" href="/TIL/assets/js/17.1a5a8535.js"><link rel="prefetch" href="/TIL/assets/js/19.5c641c86.js"><link rel="prefetch" href="/TIL/assets/js/20.e19fbcac.js"><link rel="prefetch" href="/TIL/assets/js/21.42081143.js"><link rel="prefetch" href="/TIL/assets/js/22.7ed585a9.js"><link rel="prefetch" href="/TIL/assets/js/23.4edf5c86.js"><link rel="prefetch" href="/TIL/assets/js/24.391ac95e.js"><link rel="prefetch" href="/TIL/assets/js/25.f3d77dd9.js"><link rel="prefetch" href="/TIL/assets/js/26.ba7584b6.js"><link rel="prefetch" href="/TIL/assets/js/3.1619f044.js"><link rel="prefetch" href="/TIL/assets/js/4.dae408e6.js"><link rel="prefetch" href="/TIL/assets/js/5.dbed5e71.js"><link rel="prefetch" href="/TIL/assets/js/6.4d52b9c7.js"><link rel="prefetch" href="/TIL/assets/js/7.6cf6b8ac.js"><link rel="prefetch" href="/TIL/assets/js/8.33b47a26.js"><link rel="prefetch" href="/TIL/assets/js/9.60adfbc6.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.50758481.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">TIL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/bb-choi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/bb-choi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2022-08</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>2022-07</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/til/22-07/22-07-06.html" aria-current="page" class="active sidebar-link">22-07-06</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/til/22-07/22-07-06.html#지난-프로젝트-돌아보기" class="sidebar-link">지난 프로젝트 돌아보기</a></li><li class="sidebar-sub-header"><a href="/TIL/til/22-07/22-07-06.html#바닐라-javascript로-drag-drop-구현하기-🖱️-1" class="sidebar-link">바닐라 JavaScript로 Drag &amp; Drop 구현하기 🖱️ - 1</a></li><li class="sidebar-sub-header"><a href="/TIL/til/22-07/22-07-06.html#드래그-방식으로-여러-박스-옮기기" class="sidebar-link">드래그 방식으로 여러 박스 옮기기</a></li></ul></li><li><a href="/TIL/til/22-07/22-07-07.html" class="sidebar-link">22-07-07</a></li><li><a href="/TIL/til/22-07/22-07-13.html" class="sidebar-link">22-07-13</a></li><li><a href="/TIL/til/22-07/22-07-14.html" class="sidebar-link">22-07-14</a></li><li><a href="/TIL/til/22-07/22-07-17.html" class="sidebar-link">22-07-17</a></li><li><a href="/TIL/til/22-07/22-07-19.html" class="sidebar-link">22-07-19</a></li><li><a href="/TIL/til/22-07/22-07-20.html" class="sidebar-link">22-07-20</a></li><li><a href="/TIL/til/22-07/22-07-21.html" class="sidebar-link">22-07-21</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2022-05</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2022-04</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_22-07-06"><a href="#_22-07-06" class="header-anchor">#</a> 22-07-06</h1> <p>코드스쿼드 기간 동안 프로젝트 진행과 작성을 함께 진행하기가 어렵다는 핑계로 TIL 작성에 소홀했다. 코드스쿼드 수료(<code>7/1</code>)도 하였으니 이제 꾸준히 작성을 해 보려 한다💪. 기록을 습관화 하여 앞으로도 꾸준히 적을 수 있도록 노력해보자🤓!</p> <h2 id="지난-프로젝트-돌아보기"><a href="#지난-프로젝트-돌아보기" class="header-anchor">#</a> 지난 프로젝트 돌아보기</h2> <p>지난 <a href="https://github.com/healtheloper/todo-list" target="_blank" rel="noopener noreferrer"><code>todo-list</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 프로젝트를 진행하면서 drag&amp;drop API 없이 바닐라 JavaScript로 드래그 앤 드랍은 구현하지 못한 채로 마무리를 하였다. (대신 바닐라 JS로 React를 구현해보는 뜻깊은 시간을 보냈다😊👍)</p> <p>수료 후 지난 프로젝트들을 돌아보면서, 미처 완성하지 못했던 부분을 하나씩 완성해 보려 한다💪</p> <h2 id="바닐라-javascript로-drag-drop-구현하기-🖱️-1"><a href="#바닐라-javascript로-drag-drop-구현하기-🖱️-1" class="header-anchor">#</a> 바닐라 JavaScript로 Drag &amp; Drop 구현하기 🖱️ - 1</h2> <p><code>할 일</code> - <code>하는 중</code> - <code>끝난 일</code>이라는 분류 내에 여러 <code>todo</code> 들이 있을때, 이 <code>todo</code>를 드래그 앤 드랍으로 분류를 이동하고, 원하는 위치(분류 내 todo들의 순서)에 위치 시키는 것이 최종 목표이다.</p> <h3 id="_1단계-단-하나의-todo를-이동시키자"><a href="#_1단계-단-하나의-todo를-이동시키자" class="header-anchor">#</a> 1단계 - 단 하나의 todo를 이동시키자</h3> <p>일단 복잡한 과제를 단순화 하여 수행해 보기로 하였다🤓.
분류 내 여러 todo 사이에 순서까지는 고려하지 않고, 단 하나의 todo만이 존재한다고 가정하여 드래그 앤 드롭을 먼저 구현해보자.</p> <p>먼저 <a href="#%E1%84%83%E1%85%B3%E1%84%85%E1%85%A2%E1%84%80%E1%85%B3-%E1%84%87%E1%85%A1%E1%86%BC%E1%84%89%E1%85%B5%E1%86%A8%E1%84%8B%E1%85%B3%E1%84%85%E1%85%A9-%E1%84%8B%E1%85%A7%E1%84%85%E1%85%A5-%E1%84%87%E1%85%A1%E1%86%A8%E1%84%89%E1%85%B3-%E1%84%8B%E1%85%A9%E1%86%B1%E1%84%80%E1%85%B5%E1%84%80%E1%85%B5"><code>드래그 방식으로 여러 박스를 옮기기</code></a>를 목표로 학습 및 구현해 본 후, 아래와 같이 진행하였다.</p> <h3 id="노드-복사"><a href="#노드-복사" class="header-anchor">#</a> 노드 복사</h3> <p><a href="https://developer.mozilla.org/ko/docs/Web/API/Node/cloneNode" target="_blank" rel="noopener noreferrer">Node.cloneNode()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>를 이용, 선택된 todo를 복사하여 이동시에 보여주도록 하였다.</p> <h3 id="좌표를-이용하여-목표-container-찾기"><a href="#좌표를-이용하여-목표-container-찾기" class="header-anchor">#</a> 좌표를 이용하여 목표 container 찾기</h3> <p>좌표를 기준으로 도착점 container를 찾을 수 있도록, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/elementsFromPoint" target="_blank" rel="noopener noreferrer">Document.elementsFromPoint()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>를 이용하여 목표 container(<code>targetContainer</code>)를 찾을 수 있도록 하였다.</p> <div class="language-js extra-class"><pre class="language-js"><code>targetContainer <span class="token operator">=</span> document
  <span class="token punctuation">.</span><span class="token function">elementsFromPoint</span><span class="token punctuation">(</span>pageX <span class="token operator">-</span> wrapOffset<span class="token punctuation">.</span>x<span class="token punctuation">,</span> pageY <span class="token operator">-</span> wrapOffset<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> el<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;container&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="mouseup-이벤트-핸들러"><a href="#mouseup-이벤트-핸들러" class="header-anchor">#</a> mouseup 이벤트 핸들러</h3> <p><code>mouseup</code>이벤트 발생(영역 밖으로 <code>mouseleave</code>이벤트 발생)시 targetContainer에 <a href="https://developer.mozilla.org/ko/docs/Web/API/Node/appendChild" target="_blank" rel="noopener noreferrer">Node.appendChild()<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>를 이용하여 노드를 추가해 주었다.</p> <h3 id="🖥️-구현-화면"><a href="#🖥️-구현-화면" class="header-anchor">#</a> 🖥️ 구현 화면</h3> <iframe src="https://codesandbox.io/embed/gracious-firefly-o3eqc1?fontsize=14&amp;hidenavigation=1&amp;theme=light&amp;view=preview" title="gracious-firefly-o3eqc1" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h2 id="드래그-방식으로-여러-박스-옮기기"><a href="#드래그-방식으로-여러-박스-옮기기" class="header-anchor">#</a> 드래그 방식으로 여러 박스 옮기기</h2> <p><a href="https://www.youtube.com/watch?v=H9H5lYSfYfU&amp;list=PLq8wAnVUcTFWhQrIXNN6kPYXJA6X2IQM4&amp;index=48" target="_blank" rel="noopener noreferrer">뉴렉처<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>의 자바스크립트 &amp; DOM 프로그래밍 강의 <code>48~</code>을 참고로 여러 박스 옮기기를 구현해 보았다.</p> <iframe src="https://codesandbox.io/embed/deuraegeu-bangsigeuro-yeoreo-bagseu-olmgigi-n141dw?fontsize=14&amp;hidenavigation=1&amp;theme=light&amp;view=preview" title="드래그 방식으로 여러 박스 옮기기" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="좌표"><a href="#좌표" class="header-anchor">#</a> 좌표</h3> <ul><li>pageX, pageY : 현재 페이지(전체 스크롤 영역)를 기준으로 한 x, y좌표</li> <li>offsetX, offsetY : 요소를 기준으로 한 x, y 좌표</li></ul> <h3 id="드래그시-요소-위치를-자연스럽게-조정"><a href="#드래그시-요소-위치를-자연스럽게-조정" class="header-anchor">#</a> 드래그시 요소 위치를 자연스럽게 조정</h3> <ul><li><p><code>mousedown</code> 이벤트의 target이 <code>box</code>인 경우 <code>event.offsetX</code>, <code>event.offsetY</code>로 box 선택시 위치 그대로 드래그 되도록 조정</p></li> <li><p><code>mousemove</code>시 선택된 <code>box</code>가 있을 경우 <code>pageX</code>, <code>pageY</code>와 위에서 찾은 box의 offsetX, offsetY로 자연스러운 위치로 조정</p></li> <li><p><code>pageX</code>, <code>pageY</code>를 이용하므로 <code>container</code>의 위치까지 반영되도록 <code>$wrap.offsetLeft</code>, <code>$wrap.offsetTop</code>도 위치 계산에 적용</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>selectedBox<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageX <span class="token operator">-</span> offset<span class="token punctuation">.</span>x <span class="token operator">-</span> $wrap<span class="token punctuation">.</span>offsetLeft<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
selectedBox<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pageY <span class="token operator">-</span> offset<span class="token punctuation">.</span>y <span class="token operator">-</span> $wrap<span class="token punctuation">.</span>offsetTop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><h3 id="영역-밖으로-마우스가-나갈-경우-이벤트-처리"><a href="#영역-밖으로-마우스가-나갈-경우-이벤트-처리" class="header-anchor">#</a> 영역 밖으로 마우스가 나갈 경우 이벤트 처리</h3> <p><code>container</code>밖으로 <code>mouseleave</code>이벤트가 발생시 <code>mouseup</code>과 같은 이벤트 핸들러를 동작시킨다.</p> <hr> <p>1단계 구현을 수행하면서 처음 사용해 보는 메소드나 <code>Array.find()</code>와 같이 알고는 있으나 잘 사용해 보지 않았던 메소드를 사용해 볼 수 있었다.</p> <p>평소 연습을 CodeSandbox나 CodePen 등을 통해 하곤 하는데, TIL작성을 하면서 CodeSandbox의 Embed를 처음 사용해 보았다. 앞으로도 연습한 내용을 TIL에 작성 하는 데에 유용하게 사용할 수 있을 듯 😆</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/til/22-08/22-08-01.html" class="prev">
        22-08-01
      </a></span> <span class="next"><a href="/TIL/til/22-07/22-07-07.html">
        22-07-07
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TIL/assets/js/app.d24ce332.js" defer></script><script src="/TIL/assets/js/2.2defd20b.js" defer></script><script src="/TIL/assets/js/18.562a103f.js" defer></script>
  </body>
</html>
